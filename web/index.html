<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini-Transformer Demo</title>
  <link rel="stylesheet" href="style.css" />
  <script src="main.js" defer></script>
</head>

<body>
  <!-- NAV -->
  <header class="navbar">
    <div class="container">
      <h1>Mini-Transformer Web Demo</h1>
      <p class="muted">ì…ë ¥ í† í° â†’ ë‹¤ìŒ í† í° ì˜ˆì¸¡ / ì‹œí€€ìŠ¤ ìƒì„±</p>
      <div class="status-indicator">
        <span id="serverStatus" class="status-dot offline"></span>
        <span id="statusText">ì„œë²„ ìƒíƒœ í™•ì¸ ì¤‘â€¦</span>
      </div>
    </div>
  </header>

  <main class="container">

        <!-- MODEL SUMMARY -->
        <section aria-labelledby="model-summary">
        <h3 id="model-summary">ê¸°ë³¸ ëª¨ë¸ ì„¤ì • ìš”ì•½</h3>
        <div class="config-grid">
            <div class="config-item"><label>vocab_size</label><span id="vocabSize">â€”</span></div>
            <div class="config-item"><label>d_model</label><span id="dModel">â€”</span></div>
            <div class="config-item"><label>n_layers</label><span id="nLayers">â€”</span></div>
            <div class="config-item"><label>n_heads</label><span id="nHeads">â€”</span></div>
            <div class="config-item"><label>d_ff</label><span id="dFf">â€”</span></div>
            <div class="config-item"><label>max_seq_len</label><span id="maxSeq">â€”</span></div>
            <div class="config-item"><label>ìµœëŒ€ í† í° ID</label><span id="maxTokenId">â€”</span></div>
        </div>
        </section>
        <!-- ARCH DIAGRAM -->
        <section aria-labelledby="arch">
        

    <!-- ARCH DIAGRAM -->
    <section aria-labelledby="arch">
    <h3 id="arch">ì•„í‚¤í…ì²˜</h3>

    <!-- 1) ìƒë‹¨: End-to-End íë¦„ (ë¦¬ë³¸í˜•) -->
    <div class="embedding-section" style="max-width: 980px">
            <div class="box embedding-box">
            <div class="box-title">ì…ë ¥</div>
            <div class="box-subtitle">í† í° ID ì‹œí€€ìŠ¤</div>
            <div class="box-content">e.g. <code>101, 42, 17, 9</code></div>
            </div>
            <div class="arrow">â¡</div>

            <div class="box embedding-box">
            <div class="box-title">ì„ë² ë”© + ìœ„ì¹˜</div>
            <div class="box-subtitle">seq_len Ã— d_model</div>
            <div class="box-content">í† í°ì„ë² ë”© + ìœ„ì¹˜ì¸ì½”ë”©(ì‚¬ì¸/ì½”ì‚¬ì¸ or í•™ìŠµí˜•)</div>
            </div>
            <div class="arrow">â¡</div>

            <div class="box transformer-box">
            <div class="box-title">íŠ¸ëœìŠ¤í¬ë¨¸ ë¸”ë¡</div>
            <div class="box-subtitle">Pre-LN Ã— <code>n_layers</code></div>
            <div class="box-content">
                    <div class="layer">LN â†’ MHA â†’ Residual</div>
                    <div class="layer">LN â†’ FFN â†’ Residual</div>
            </div>
            </div>
            <div class="arrow">â¡</div>

            <div class="box logits-box">
            <div class="box-title">Projection</div>
            <div class="box-subtitle">d_model â†’ vocab</div>
            <div class="box-content">logits â†’ Softmax</div>
            </div>
            <div class="arrow">â¡</div>

            <div class="box output-box">
            <div class="box-title">ë‹¤ìŒ í† í°</div>
            <div class="box-subtitle">argmax / sampling</div>
            </div>
    </div>

    <!-- 2) í•˜ë‹¨: ë¸”ë¡ ë‚´ë¶€ ìƒì„¸ (ë…¼ë¬¸/êµ¬í˜„ ì •ë ¬) -->
    <div class="box" style="margin-top:16px; padding:16px;">
            <div class="box-title" style="margin-bottom:8px;">Transformer Block (Pre-LN, êµ¬í˜„ ë™ì¼)</div>

            <!-- ì•½ê°„ì˜ ì¸ë¼ì¸ ë ˆì´ì•„ì›ƒ ìœ í‹¸ -->
            <style>
            .arch-grid{display:grid;grid-template-columns:repeat(12,1fr);gap:10px;align-items:stretch}
            .arch-col{border:1px solid var(--gray-300);border-radius:12px;padding:12px;background:#fff}
            .arch-col h5{margin:0 0 6px 0;font-size:14px}
            .chip{display:inline-block;border:1px dashed var(--gray-300);border-radius:8px;padding:4px 8px;margin:2px 0;font-size:12px}
            .thin{font-size:12px;color:var(--gray-600)}
            .eq{background:#f8fafc;border-radius:8px;padding:6px 8px;font-family:ui-monospace,SFMono-Regular,Consolas,monospace;font-size:12px; text-align:center;}
            .arrow-v{font-size:18px;line-height:1;text-align:center;color:var(--gray-600)}
            /* í‘œ ì°¸ê³  ì»¬ëŸ¼ ê¹¨ì§ ë°©ì§€ */
            .ref-table td, .ref-table th { vertical-align: top; }
            </style>

            <div class="arch-grid">

            <!-- Pre-LN -->
            <div class="arch-col" style="grid-column:span 2;">
                    <h5>LayerNorm</h5>
                    <div class="thin">ì…ë ¥: <code>(seq_len Ã— d_model)</code></div>
                    <div class="eq">y = LN(x)</div>
                    <div class="arrow-v">â¬‡</div>
                    <div class="thin">Pre-LN: LNì„ ë¨¼ì € ì ìš©</div>
            </div>

            <!-- MHA -->
            <div class="arch-col" style="grid-column:span 5;">
                    <h5>Multi-Head Self-Attention</h5>
                    <div class="chip">Q = X W<sub>Q</sub>, K = X W<sub>K</sub>, V = X W<sub>V</sub></div>
                    <div class="thin">W*: <code>(d_model Ã— d_model)</code>, head_dim = <code>d_model / n_heads</code></div>
                    <div class="chip">Split â†’ <code>(seq_len Ã— n_heads Ã— head_dim)</code></div>
                    <div class="eq">Attention(Q,K,V) = softmax( QK<sup>T</sup> / âˆšd<sub>k</sub> <span class="thin">(+ mask?)</span> ) V</div>
                    <div class="chip">Concat heads â†’ <code>(seq_len Ã— d_model)</code></div>
                    <div class="chip">Output proj: W<sub>O</sub> âˆˆ <code>(d_model Ã— d_model)</code></div>
                    <div class="thin">â€» ë°ëª¨: causal mask/KV cache ìƒëµ ê°€ëŠ¥(í™•ì¥ ì§€ì )</div>
            </div>

            <!-- Residual 1 -->
            <div class="arch-col" style="grid-column:span 2;">
                    <h5>Residual Add</h5>
                    <div class="eq">x<sub>1</sub> = x + MHA(LN(x))</div>
                    <div class="thin">skip connection</div>
            </div>

            <!-- LN â†’ FFN -->
            <div class="arch-col" style="grid-column:span 3;">
                    <h5>LayerNorm â†’ FFN</h5>
                    <div class="chip">z = LN(x<sub>1</sub>)</div>
                    <div class="chip">FFN: Linear(d<sub>model</sub>â†’d<sub>ff</sub>) â†’ ReLU â†’ Linear(d<sub>ff</sub>â†’d<sub>model</sub>)</div>
                    <div class="eq">x<sub>2</sub> = x<sub>1</sub> + FFN(z)</div>
                    <div class="thin">í™œì„±í•¨ìˆ˜: ë°ëª¨ëŠ” <code>ReLU</code> (êµì²´ ê°€ëŠ¥)</div>
            </div>

            <!-- ë°˜ë³µ ì•ˆë‚´ -->
            <div class="arch-col" style="grid-column:span 12;background:#f8fafc;">
                    <div class="thin"><strong>ë°˜ë³µ</strong>: ìœ„ ë¸”ë¡ì„ <code>n_layers</code> ë²ˆ ìŠ¤íƒ</div>
            </div>

            <!-- Final Norm & Output -->
            <div class="arch-col" style="grid-column:span 3;">
                    <h5>Final LayerNorm</h5>
                    <div class="eq">h = LN(x<sub>L</sub>)</div>
                    <div class="thin">L = ë§ˆì§€ë§‰ ë¸”ë¡</div>
            </div>
            <div class="arch-col" style="grid-column:span 5;">
                    <h5>Output Projection</h5>
                    <div class="chip">W<sub>out</sub> âˆˆ <code>(d_model Ã— vocab_size)</code></div>
                    <div class="eq">logits = h Â· W<sub>out</sub></div>
            </div>
            <div class="arch-col" style="grid-column:span 4;">
                    <h5>Softmax & Next Token</h5>
                    <div class="eq">p = softmax(logits)</div>
                    <div class="thin">argmax / temperature, top-k ë“± ìƒ˜í”Œë§</div>
            </div>

            </div>
    </div>
            <!-- ì„¸ë¶€: ì‹¤ì œ ì½”ë“œ êµ¬ì¡°ì™€ ìˆ˜ì‹/ì»¤ë„ ì—°ê²° -->
            <details class="help-details" style="margin-top:12px;">
                    <summary><strong>ë„ì‹ ì½ëŠ” ë²• / ì‹¤ì œ ì½”ë“œ ì£¼ì„</strong></summary>
                    <div class="help-content" style="text-align:left">

                            <!-- MathJax ë¡œë”©: ìˆ˜ì‹ ê¹¨ì§ ë°©ì§€ -->
                            <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>

                            <h4>ì „íŒŒ ìˆœì„œ (Pre-LN Causal LM: ì½”ë“œ ê¸°ë°˜)</h4>
                            <ol>
                                    <li><b>ì„ë² ë”© + ìœ„ì¹˜</b>:
                                            <div>í† í° IDëŠ” <code>Transformer::token_embed</code> í–‰ë ¬ì—ì„œ ì„ë² ë”© ë²¡í„°ë¥¼ ì¡°íšŒí•˜ê³ ,
                                                    <code>pos_embed</code> (ì‚¬ì¸/ì½”ì‚¬ì¸ ëŒ€ì‹  learnable)ê³¼ ë”í•´
                                                    <div style="text-align:center;">\(\mathbf{X}\in\mathbb{R}^{L\times d_{model}}\)</div>
                                            </div>
                                    </li>

                                    <li><b>ë¸”ë¡ (Ã— n_layers)</b> â€” <b>Pre-LN</b>:
                                            <ul>
                                                    <li><b>LayerNorm â†’ MHA â†’ Residual</b>:  
                                                            <div style="text-align:center;">
                                                            \(Q = XW_Q,\;\;K=XW_K,\;\;V=XW_V,\quad
                                                            \text{Attn}(Q,K,V)=\mathrm{softmax}\!\left(\frac{QK^\top}{\sqrt{d_k}}\right)V\)
                                                            </div>
                                                            ê° headëŠ” <code>Attention::forward</code>ì—ì„œ ê³„ì‚° â†’ concat í›„ \(W_O\) íˆ¬ì˜.
                                                    </li>
                                                    <li><b>LayerNorm â†’ FFN â†’ Residual</b>:  
                                                            FFNì€ <code>ffn.cpp</code>ì—ì„œ êµ¬í˜„:
                                                            <div style="text-align:center;">
                                                            \(\text{FFN}(x) = ( \max(0,\,xW_1 + b_1) )W_2 + b_2\)
                                                            </div>
                                                            (ì½”ë“œìƒ GeLU ê·¼ì‚¬ ëŒ€ì‹  ReLU ê¸°ë°˜ë„ í™•ì¸ë¨).
                                                    </li>
                                            </ul>
                                    </li>

                                    <li><b>ìµœì¢… LayerNorm + Projection</b>:  
                                            <code>transformer.cpp</code> ë§ˆì§€ë§‰ ë‹¨ê³„ì—ì„œ  
                                            <div style="text-align:center;">\(\hat{X}=\text{LN}(X)\)</div>, logits = <div style="text-align:center;">\(\hat{X}W_{out}\)</div>.  
                                            CPU ë‹¨ì¼ìŠ¤ë ˆë“œ matmul ì»¤ë„(<code>tensor.hpp::matmul</code>) ì‚¬ìš©.
                                    </li>

                                    <li><b>Softmax â†’ argmax/ìƒ˜í”Œë§</b>:  
                                            <code>Transformer::next_token_argmax()</code>ì—ì„œ êµ¬í˜„.  
                                            SoftmaxëŠ” <code>tensor.hpp::softmax_rows()</code>ë¡œ ì•ˆì •í™” (row-wise max subtraction).
                                    </li>
                            </ol>

                            <h4>ì½”ë“œ ì œì•½ & ìˆ˜í•™ì  ê·¼ê±°</h4>
                            <ul>
                                    <li><b>Pre-LN</b>: ë¸”ë¡ ë‚´ë¶€ì—ì„œ í•­ìƒ LN â†’ SubLayer â†’ Residual. (<code>layernorm.cpp</code>)</li>
                                    <li><b>í—¤ë“œ ì°¨ì›</b>: <code>d_model % n_heads == 0</code>, head_dim = <code>d_model/n_heads</code>.</li>
                                    <li><b>FFN</b>: êµ¬í˜„ì€
                                            <code>W1(d_modelÃ—d_ff) â†’ GeLU/ReLU â†’ W2(d_ffÃ—d_model)</code>.  
                                            GeLU ê·¼ì‚¬ì‹:  
                                            <div style="text-align:center;">
                    <li><b>ë§ˆìŠ¤í‚¹</b>: <code>attention.cpp</code>ì—ì„œ <code>if (causal)</code> ë¶„ê¸° ì‹œ  
                        score í–‰ë ¬ì— âˆ’1e9 ê°€ì‚° â†’ softmax í›„ ìƒì‚¼ê° mask êµ¬í˜„ ê°€ëŠ¥.</li>
                </ul>

                <hr style="margin:12px 0"/>

                <h4>ì‹¤ì œ ì½”ë“œ ìŠ¤ë‹ˆí« (í•µì‹¬ êµ¬í˜„)</h4>

                <p><b>FFN::forward (ffn.cpp)</b></p>
                <pre><code>Tensor h(x.rows(), d_ff);
matmul(x, W1, h);
gelu(h);                       // GeLU ê·¼ì‚¬ (tensor.hpp)
Tensor y(x.rows(), x.cols());
matmul(h, W2, y);
add(y, x, out);                // Residual Add
            </code></pre>

                <p><b>LayerNorm::forward (layernorm.cpp)</b></p>
                <pre><code>for row in x:
mean = average(row)
var  = variance(row)
y = gamma * (row - mean) / sqrt(var + eps) + beta
            </code></pre>

                <p><b>Attention::forward (attention.cpp)</b></p>
                <pre><code>// 1. Q,K,V ê³„ì‚°
matmul(x, Wq, Q);
matmul(x, Wk, K);
matmul(x, Wv, V);

// 2. Score = Q K^T / sqrt(d_k)
// [ì˜µì…˜] causal mask ì ìš©
softmax_rows(score);

// 3. Context = score V
// 4. Head concat í›„ Wo íˆ¬ì˜
            </code></pre>

                <p><b>Softmax/Matmul ì»¤ë„ (tensor.hpp)</b></p>
                <pre><code>void softmax_rows(Tensor&amp; m) {
    for row in m:
            float max = row.max();
            row = exp(row - max);
            row /= sum(row);
}
            </code></pre>

                <p><b>Transformer::next_token_argmax (transformer.cpp)</b></p>
                <pre><code>// 1) ì„ë² ë”© + pos_embed
// 2) ë¸”ë¡ ë°˜ë³µ: LN â†’ MHA â†’ Residual â†’ LN â†’ FFN â†’ Residual
// 3) final LN, Projection
// 4) softmax + argmax
            </code></pre>

        <hr style="margin:12px 0"/>

            <!-- í‘œ ìš”ì•½ -->
            <h4>ìˆ˜ì‹ & ë ˆí¼ëŸ°ìŠ¤ ìš”ì•½ í‘œ</h4>
            <div style="overflow:auto">
            <table style="width:100%; border-collapse:collapse; font-size:0.95rem">
                <thead>
                <tr>
                    <th style="text-align:left; border-bottom:1px solid #ddd; padding:.4rem">ë¸”ë¡</th>
                    <th style="text-align:left; border-bottom:1px solid #ddd; padding:.4rem">ìˆ˜ì‹</th>
                    <th style="text-align:left; border-bottom:1px solid #ddd; padding:.4rem">ì°¸ê³ </th>
                </tr>
                </thead>
                <tbody>
                <tr>
                    <td style="padding:.4rem">Scaled Dot-Product Attention</td>
                    <td style="padding:.4rem; white-space:nowrap">
                    \(\mathrm{softmax}\!\left(\frac{QK^\top}{\sqrt{d_k}}\right)V\)
                    </td>
                    <td style="padding:.4rem">[1, Eq.(1)]</td>
                </tr>
                <tr>
                    <td style="padding:.4rem">MHA íˆ¬ì˜</td>
                    <td style="padding:.4rem">
                    \(Q\!=\!XW_Q,\;K\!=\!XW_K,\;V\!=\!XW_V\); concatâ†’\(W_O\)
                    </td>
                    <td style="padding:.4rem">[1, Â§3.2.1]</td>
                </tr>
                <tr>
                    <td style="padding:.4rem">FFN (ì½”ë“œ: GeLU ê·¼ì‚¬)</td>
                    <td style="padding:.4rem">
                    \(\mathrm{FFN}(x)=\sigma(xW_1\!+\!b_1)W_2\!+\!b_2\);
                    \(\mathrm{GeLU}(x)\!\approx\!0.5x(1+\tanh(\sqrt{2/\pi}(x+0.044715x^3)))\)
                    </td>
                    <td style="padding:.4rem">[1, Â§3.3], [2]</td>
                </tr>
                <tr>
                    <td style="padding:.4rem">LayerNorm</td>
                    <td style="padding:.4rem">
                    \(y=\gamma\frac{x-\mu}{\sqrt{\sigma^2+\epsilon}}+\beta\)
                    </td>
                    <td style="padding:.4rem">[3]</td>
                </tr>
                <tr>
                    <td style="padding:.4rem">Pre-LN ì”ì°¨ ë°°ì¹˜</td>
                    <td style="padding:.4rem">
                    \(x+\mathrm{Sublayer}(\mathrm{LN}(x))\)
                    </td>
                    <td style="padding:.4rem">[4]</td>
                </tr>
                </tbody>
            </table>
            </div>

            <h4 style="margin-top:14px">ì°¸ê³ ë¬¸í—Œ</h4>
            <ol style="margin-left:1rem">
            <li id="ref1">
                Vaswani, A. et al. <i>Attention Is All You Need</i>, NeurIPS 2017.
                <a href="https://arxiv.org/abs/1706.03762" target="_blank" rel="noopener">arXiv:1706.03762</a>
            </li>
            <li id="ref2">
                Hendrycks, D., &amp; Gimpel, K. <i>Gaussian Error Linear Units (GELUs)</i>, 2016.
                <a href="https://arxiv.org/abs/1606.08415" target="_blank" rel="noopener">arXiv:1606.08415</a>
            </li>
            <li id="ref3">
                Ba, J. L., Kiros, J. R., &amp; Hinton, G. <i>Layer Normalization</i>, 2016.
                <a href="https://arxiv.org/abs/1607.06450" target="_blank" rel="noopener">arXiv:1607.06450</a>
            </li>
            <li id="ref4">
                Xiong, R. et al. <i>On Layer Normalization in the Transformer Architecture</i>, ICML 2020.
                <a href="https://arxiv.org/abs/2002.04745" target="_blank" rel="noopener">arXiv:2002.04745</a>
            </li>
            </ol>

            <p class="muted" style="margin-top:.5rem">
            â€» í‘œì˜ [n] í‘œê¸°ëŠ” ìœ„ ì°¸ê³ ë¬¸í—Œ ë²ˆí˜¸ì…ë‹ˆë‹¤. ê° ë§í¬ëŠ” ì›ë¬¸ PDF/abstractë¡œ ì—°ê²°ë©ë‹ˆë‹¤.
            </p>
                </div>
            </details>

        <!-- CONFIG EDIT -->
        <section aria-labelledby="config-edit">
          <h3 id="config-edit">ì„¤ì • ì¡°ì • (ì˜µì…˜)</h3>

          <div class="config-edit-section">
            <div class="config-controls">
              <div class="config-row">
                <label for="vocabSizeInput">vocab_size</label>
                <input id="vocabSizeInput" type="number" min="100" max="10000" value="3200" oninput="updateConfig()" />
              </div>
              <div class="config-row">
                <label for="dModelInput">d_model</label>
                <input id="dModelInput" type="number" min="16" step="8" value="128" oninput="updateConfig()" />
              </div>
              <div class="config-row">
                <label for="nLayersInput">n_layers</label>
                <input id="nLayersInput" type="number" min="1" value="1" oninput="updateConfig()" />
              </div>
              <div class="config-row">
                <label for="nHeadsInput">n_heads</label>
                <input id="nHeadsInput" type="number" min="1" value="2" oninput="updateConfig()" />
              </div>
              <div class="config-row">
                <label for="dFfInput">d_ff</label>
                <input id="dFfInput" type="number" min="64" step="64" value="512" oninput="updateConfig()" />
              </div>
              <div class="config-row">
                <label for="maxSeqInput">max_seq_len</label>
                <input id="maxSeqInput" type="number" min="8" step="8" value="64" oninput="updateConfig()" />
              </div>
            </div>

            <div class="config-actions">
              <button class="btn-primary" onclick="applyConfig()">ì ìš©</button>
              <button class="btn-outline" onclick="resetConfig()">ê¸°ë³¸ê°’</button>
            </div>
            <br/>
            <!-- === ì‹¤ì „ í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ === -->
            <div class="config-guide">
            <h4 style="text-align:left;">í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ (ê¶Œì¥ í”„ë¦¬ì…‹ & íŠœë‹ ìš”ë ¹)</h4>

            <div class="config-grid" style="grid-template-columns: 1fr 2fr; text-align:left;">
                <div class="config-item" style="text-align:left;">
                <label style="text-align:left;">ê¶Œì¥ ì‹œì‘ê°’</label>
                <div>
                    <code>vocab_size=3200</code><br/>
                    <code>d_model=128</code>, <code>n_heads=2</code><br/>
                    <code>n_layers=1</code>, <code>d_ff=512</code><br/>
                    <code>max_seq_len=64</code>
                </div>
                </div>
                <div class="config-item" style="text-align:left;">
                <label style="text-align:left;">íŠœë‹ ìš”ë ¹</label>
                <ul style="margin:0; text-align:left;">
                    <li><b>d_model</b>ì€ <b>n_heads</b>ë¡œ ë‚˜ëˆ„ì–´ë–¨ì–´ì ¸ì•¼ í•©ë‹ˆë‹¤. ì˜ˆ: 128/2, 256/4</li>
                    <li><b>íŒŒë¼ë¯¸í„° ìˆ˜</b>ëŠ” ëŒ€ëµ
                    <code>ì„ë² ë”©(í† í°+í¬ì§€ì…˜) + ë ˆì´ì–´Ã—(MHA+FFN+LN) + ì¶œë ¥</code>ìœ¼ë¡œ ì¦ê°€í•©ë‹ˆë‹¤.
                    ê°’ì´ ì»¤ì§ˆìˆ˜ë¡ ë©”ëª¨ë¦¬/ì¶”ë¡ ì‹œê°„â†‘</li>
                    <li><b>vocab_size</b>ë¥¼ í‚¤ìš°ë©´ ì¶œë ¥ Projection í¬ê¸°ì™€ Softmaxê°€ í¬ê²Œ ì¦ê°€í•©ë‹ˆë‹¤.</li>
                    <li><b>n_layers</b>ë¥¼ í‚¤ìš°ë©´ ê¹Šì´ ì¦ê°€(í‘œí˜„ë ¥â†‘), í•˜ì§€ë§Œ ì¶”ë¡ ì‹œê°„ë„ ë¹„ë¡€ ì¦ê°€.</li>
                    <li><b>n_heads</b>ëŠ” <code>d_model / n_heads</code>ê°€ ë„ˆë¬´ ì‘ì§€ ì•Šê²Œ(ë³´í†µ â‰¥ 32) êµ¬ì„±.</li>
                    <li><b>d_ff</b>ëŠ” ë³´í†µ <code>4Ã—d_model</code> ê·¼ì²˜ë¡œ ì‹œì‘(ì˜ˆ: d_model=128 â†’ d_ff=512).</li>
                    <li><b>max_seq_len</b>ì´ í´ìˆ˜ë¡ ë©”ëª¨ë¦¬/ì‹œê°„â†‘. ë°ëª¨ëŠ” 64~128 ê¶Œì¥.</li>
                </ul>
                </div>
            </div>

            <details style="margin-top:1rem;">
                <summary><b>ì‹¤ìŠµ íŒ / ì˜¤ë¥˜ ë°©ì§€ ì²´í¬ë¦¬ìŠ¤íŠ¸</b></summary>
                <ul style="text-align:left;">
                <li>í”„ë¡ íŠ¸ì—ì„œ <b>ì ìš©</b> ë²„íŠ¼ì„ ëˆ„ë¥¸ ë’¤, <b>ì˜ˆì¸¡í•˜ê¸°</b>ë¡œ ë™ì‘ í™•ì¸</li>
                <li>ì„œë²„ ë¡œê·¸ì— <code>set_config ìš”ì²­</code>, <code>ìƒˆ ëª¨ë¸ êµ¬ì„± ì ìš© ì™„ë£Œ</code>ê°€ ë³´ì—¬ì•¼ ì •ìƒ ì ìš©</li>
                <li><code>d_model % n_heads == 0</code> ì¡°ê±´ì„ ë°˜ë“œì‹œ ë§Œì¡±</li>
                <li>ë©”ëª¨ë¦¬ ë¶€ì¡±/ê³¼í•œ ì§€ì—°ì´ ëŠê»´ì§€ë©´:
                    <ul>
                    <li>ìš°ì„  <b>n_layers</b>ë¥¼ 1ë¡œ ë‚®ì¶”ê³ </li>
                    <li><b>d_model</b>ì„ 128 ë˜ëŠ” 64ë¡œ ë‚®ì¶˜ ë’¤</li>
                    <li><b>max_seq_len</b>ë„ 64 ì´í•˜ë¡œ í…ŒìŠ¤íŠ¸</li>
                    </ul>
                </li>
                <li>í•™ìŠµëœ ê°€ì¤‘ì¹˜ê°€ ì—†ìœ¼ë©´ ê²°ê³¼ëŠ” ëœë¤ì— ê°€ê¹ìŠµë‹ˆë‹¤(ë°ëª¨ ëª©ì ).</li>
                </ul>
            </details>
            
            <div class="config-grid" style="grid-template-columns: repeat(3, 1fr); margin-top:1rem;">
                <div class="config-item" style="text-align:left;">
                <label style="text-align:left;">ê°€ë²¼ìš´ ë°ëª¨</label>
                <div><code>vocab=1000</code>, <code>d_model=64</code>, <code>n_heads=2</code>, <code>n_layers=1</code>, <code>d_ff=256</code>, <code>max_seq_len=64</code></div>
                </div>
                <div class="config-item" style="text-align:left;">
                <label style="text-align:left;">í‘œì¤€ ë°ëª¨</label>
                <div><code>vocab=3200</code>, <code>d_model=128</code>, <code>n_heads=2</code>, <code>n_layers=1</code>, <code>d_ff=512</code>, <code>max_seq_len=64</code></div>
                </div>
                <div class="config-item" style="text-align:left;">
                <label style="text-align:left;">ì¡°ê¸ˆ ë¬´ê±°ì›€</label>
                <div><code>vocab=4096</code>, <code>d_model=256</code>, <code>n_heads=4</code>, <code>n_layers=2</code>, <code>d_ff=1024</code>, <code>max_seq_len=128</code></div>
                </div>
            </div>

            <p class="muted" style="margin-top:.75rem; text-align:left;">
                * ì„±ëŠ¥/ì§€ì—°ì‹œê°„ì€ CPU ì‚¬ì–‘ê³¼ ì»´íŒŒì¼ ì˜µì…˜ì— í¬ê²Œ ì¢Œìš°ë©ë‹ˆë‹¤. ë©€í‹°ìŠ¤ë ˆë“œ/SIMD ìµœì í™”ê°€ ì—†ëŠ” ë°ëª¨ êµ¬ì„±ì—ì„œëŠ” ìœ„ <b>í‘œì¤€ ë°ëª¨</b>ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.
            </p>
            </div>
          </div>
    </section>


    <!-- DEMO -->
    <section aria-labelledby="demo">
      <h3 id="demo">ë°ëª¨ ì‹¤í–‰</h3>

      <div class="demo-controls">
        <div class="input-group">
          <label for="tokenInput">í† í° ID (ì‰¼í‘œ êµ¬ë¶„)</label>
          <input id="tokenInput" type="text" placeholder="ì˜ˆ: 101, 42, 17" autocomplete="off" />
          <div class="input-help">0 â‰¤ token &lt; <span id="maxTokenRange">vocab_size</span> (ì—”í„°ë¡œë„ ì‹¤í–‰)</div>
        </div>

        <div class="button-group">
          <button id="predictBtn" class="btn-primary" onclick="submitPrediction()">ğŸ¯ ì˜ˆì¸¡í•˜ê¸°</button>
          <button class="btn-outline" onclick="clearResults()">â™» ì´ˆê¸°í™”</button>
        </div>

        <div class="example-tokens">
          <button class="token-example" onclick="setTokens('101,42,17')">ì˜ˆì‹œ1</button>
          <button class="token-example" onclick="setTokens('12,8,9,3,2')">ì˜ˆì‹œ2</button>
          <button class="token-example" onclick="setTokens('7,7,7,13')">ì˜ˆì‹œ3</button>
        </div>

        <div id="result" class="result-container">
          <div class="welcome-message">
            <h4>íŠ¸ëœìŠ¤í¬ë¨¸ ëª¨ë¸ í…ŒìŠ¤íŠ¸</h4>
            <p>ì˜ˆì‹œ ë²„íŠ¼ì„ ì°¸ì¡°í•˜ì—¬ ê°’ì„ ìˆ˜ë™ ë° ìë™ìœ¼ë¡œ ì…ë ¥ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
            <p>í† í°ì„ ì…ë ¥í•˜ê³  ë²„íŠ¼ì„ ëˆŒëŸ¬ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.</p>
            <p>ì´ ë°ëª¨ëŠ” êµìœ¡ìš©ì´ë©° ì´ˆê¸° ê°€ì¤‘ì¹˜ëŠ” ì„ì˜ê°’ì¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
          </div>
        </div>
      </div>
    </section>

</main>

  <!-- Back to Top -->
  <button id="backToTop" title="ë§¨ ìœ„ë¡œ">â†‘</button>

  <!-- Loading -->
  <div id="loadingOverlay" class="loading-overlay" role="alert" aria-live="polite">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <div>ì²˜ë¦¬ ì¤‘â€¦</div>
    </div>
  </div>
</body>
</html>